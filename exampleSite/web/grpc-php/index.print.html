<!DOCTYPE html>
<html id="R-html" lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.154.5">
    <meta name="generator" content="Relearn 9.0.3+8bb66fa674351f3a0b0917a7552caac686eca920">
    <meta name="description" content="grpcæ˜¯é¢å¯¹å¾®æœåŠ¡æ¡†æ¶è€Œé£ç”Ÿæ°´èµ·çš„ï¼Œä¸Šæ¬¡æˆ‘ç”¨pythonç¼–å†™äº†ä¸€ä¸ªå›¾ç¥ç»ç½‘ç»œå¤„ç†çš„å¾®æœåŠ¡ï¼Œä½¿ç”¨grpcæ”¾åœ¨æˆ‘çš„æœåŠ¡å™¨æœ¬åœ°ç«¯å£ä¸Šã€‚
ç°åœ¨æˆ‘å¸Œæœ›æˆ‘çš„ä¸€ä¸ªphpé¡¹ç›®ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥æœåŠ¡ï¼Œç°åœ¨æ¥è¯•ä¸€è¯•å§~">
    <meta name="author" content="Captain Hugo">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="phpä½¿ç”¨grpcæœåŠ¡(ä»0å¼€å§‹ï¼Œå¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š) :: Purple Pulpo">
    <meta name="twitter:description" content="grpcæ˜¯é¢å¯¹å¾®æœåŠ¡æ¡†æ¶è€Œé£ç”Ÿæ°´èµ·çš„ï¼Œä¸Šæ¬¡æˆ‘ç”¨pythonç¼–å†™äº†ä¸€ä¸ªå›¾ç¥ç»ç½‘ç»œå¤„ç†çš„å¾®æœåŠ¡ï¼Œä½¿ç”¨grpcæ”¾åœ¨æˆ‘çš„æœåŠ¡å™¨æœ¬åœ°ç«¯å£ä¸Šã€‚
ç°åœ¨æˆ‘å¸Œæœ›æˆ‘çš„ä¸€ä¸ªphpé¡¹ç›®ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥æœåŠ¡ï¼Œç°åœ¨æ¥è¯•ä¸€è¯•å§~">
    <meta property="og:url" content="https://mcshelby.github.io/hugo-theme-relearn/exampleSite/web/grpc-php/index.html">
    <meta property="og:site_name" content="Purple Pulpo">
    <meta property="og:title" content="phpä½¿ç”¨grpcæœåŠ¡(ä»0å¼€å§‹ï¼Œå¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š) :: Purple Pulpo">
    <meta property="og:description" content="grpcæ˜¯é¢å¯¹å¾®æœåŠ¡æ¡†æ¶è€Œé£ç”Ÿæ°´èµ·çš„ï¼Œä¸Šæ¬¡æˆ‘ç”¨pythonç¼–å†™äº†ä¸€ä¸ªå›¾ç¥ç»ç½‘ç»œå¤„ç†çš„å¾®æœåŠ¡ï¼Œä½¿ç”¨grpcæ”¾åœ¨æˆ‘çš„æœåŠ¡å™¨æœ¬åœ°ç«¯å£ä¸Šã€‚
ç°åœ¨æˆ‘å¸Œæœ›æˆ‘çš„ä¸€ä¸ªphpé¡¹ç›®ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥æœåŠ¡ï¼Œç°åœ¨æ¥è¯•ä¸€è¯•å§~">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Web">
    <meta property="article:published_time" content="2024-03-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-03-24T00:00:00+00:00">
    <meta property="article:tag" content="GRPC">
    <meta property="article:tag" content="Php">
    <meta property="article:tag" content="Grpc-Php">
    <meta property="article:tag" content="Grpc-Python">
    <meta property="article:tag" content="Grpc-Go">
    <meta itemprop="name" content="phpä½¿ç”¨grpcæœåŠ¡(ä»0å¼€å§‹ï¼Œå¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š) :: Purple Pulpo">
    <meta itemprop="description" content="grpcæ˜¯é¢å¯¹å¾®æœåŠ¡æ¡†æ¶è€Œé£ç”Ÿæ°´èµ·çš„ï¼Œä¸Šæ¬¡æˆ‘ç”¨pythonç¼–å†™äº†ä¸€ä¸ªå›¾ç¥ç»ç½‘ç»œå¤„ç†çš„å¾®æœåŠ¡ï¼Œä½¿ç”¨grpcæ”¾åœ¨æˆ‘çš„æœåŠ¡å™¨æœ¬åœ°ç«¯å£ä¸Šã€‚
ç°åœ¨æˆ‘å¸Œæœ›æˆ‘çš„ä¸€ä¸ªphpé¡¹ç›®ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥æœåŠ¡ï¼Œç°åœ¨æ¥è¯•ä¸€è¯•å§~">
    <meta itemprop="datePublished" content="2024-03-24T00:00:00+00:00">
    <meta itemprop="dateModified" content="2024-03-24T00:00:00+00:00">
    <meta itemprop="wordCount" content="243">
    <meta itemprop="keywords" content="GRPC,Php,Grpc-Php,Grpc-Python,Grpc-Go">
    <title>phpä½¿ç”¨grpcæœåŠ¡(ä»0å¼€å§‹ï¼Œå¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š) :: Purple Pulpo</title>
    <link href="https://mcshelby.github.io/hugo-theme-relearn/exampleSite/web/grpc-php/index.html" rel="canonical" type="text/html" title="phpä½¿ç”¨grpcæœåŠ¡(ä»0å¼€å§‹ï¼Œå¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š) :: Purple Pulpo">
    <link href="/hugo-theme-relearn/exampleSite/images/logo.svg?1769159049" rel="icon" type="image/svg+xml">
    <link href="/hugo-theme-relearn/exampleSite/css/auto-complete/auto-complete.min.css?1769159049" rel="stylesheet">
    <script src="/hugo-theme-relearn/exampleSite/js/auto-complete/auto-complete.min.js?1769159049" defer></script>
    <script src="/hugo-theme-relearn/exampleSite/js/search-lunr.min.js?1769159049" defer></script>
    <script src="/hugo-theme-relearn/exampleSite/js/search.min.js?1769159049" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/hugo-theme-relearn/exampleSite/searchindex.en.js?1769159049";
    </script>
    <script src="/hugo-theme-relearn/exampleSite/js/lunr/lunr.min.js?1769159049" defer></script>
    <script src="/hugo-theme-relearn/exampleSite/js/lunr/lunr.stemmer.support.min.js?1769159049" defer></script>
    <script src="/hugo-theme-relearn/exampleSite/js/lunr/lunr.multi.min.js?1769159049" defer></script>
    <script src="/hugo-theme-relearn/exampleSite/js/lunr/lunr.en.min.js?1769159049" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/hugo-theme-relearn/exampleSite/fonts/fontawesome/css/all.min.css?1769159049" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/hugo-theme-relearn/exampleSite/fonts/fontawesome/css/all.min.css?1769159049" rel="stylesheet"></noscript>
    <link href="/hugo-theme-relearn/exampleSite/css/perfect-scrollbar/perfect-scrollbar.min.css?1769159049" rel="stylesheet">
    <link href="/hugo-theme-relearn/exampleSite/css/theme.min.css?1769159049" rel="stylesheet">
    <link href="/hugo-theme-relearn/exampleSite/css/format-print.min.css?1769159049" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/web\/grpc-php\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/mcshelby.github.io\/hugo-theme-relearn\/exampleSite';
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'auto', 'neon', 'learn' ];
      window.relearn.customvariantprefix = "my-custom-";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant") ?? "";
        if( !variant ||
            (!variant.startsWith(window.relearn.customvariantprefix) && !window.relearn.themevariants.includes(variant)) ||
            (variant.startsWith(window.relearn.customvariantprefix) && !window.localStorage.getItem(window.relearn.absBaseUri + "/variantstylesheet-" + variant)) ){
          variant = window.relearn.themevariants[0];
          window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <style>
       
      #R-body svg.purple,
      #R-body svg.purple :not([fill]),
      #R-body svg.purple [fill='black'],
      #R-body svg.purple [fill='#000000'] {
        fill: var(--INTERNAL-PRIMARY-color);
      }
    </style>
  </head>
  <body class="mobile-support print" data-origin="/hugo-theme-relearn/exampleSite/web/grpc-php/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar" class="default-animation">
        <div class="topbar-wrapper default-animation">
          <div class="topbar-sidebar-divider default-animation"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar default-animation" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc default-animation" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-table-list"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#æµç¨‹">æµç¨‹</a></li>
    <li><a href="#å®‰è£…protocè§£é‡Šå™¨">å®‰è£…protocè§£é‡Šå™¨</a></li>
    <li><a href="#å®‰è£…grpc">å®‰è£…grpc</a></li>
    <li><a href="#ç¼–è¯‘protocæ–‡ä»¶">ç¼–è¯‘protocæ–‡ä»¶</a></li>
    <li><a href="#ç¼–å†™phpè¯·æ±‚çš„ä»£ç å®¢æˆ·ç«¯ä»£ç ">ç¼–å†™phpè¯·æ±‚çš„ä»£ç (å®¢æˆ·ç«¯ä»£ç )</a>
      <ul>
        <li><a href="#ç¼–å†™æ–‡ä»¶å‰ç½®æ³¨æ„äº‹é¡¹">ç¼–å†™æ–‡ä»¶å‰ç½®æ³¨æ„äº‹é¡¹</a></li>
      </ul>
    </li>
    <li><a href="#å¤‡æ³¨">å¤‡æ³¨</a></li>
  </ul>
</nav> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/hugo-theme-relearn/exampleSite/index.html"><span itemprop="name">Purple Pulpo</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/hugo-theme-relearn/exampleSite/web/index.html"><span itemprop="name">Web</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">phpä½¿ç”¨grpcæœåŠ¡(ä»0å¼€å§‹ï¼Œå¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š)</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-edit default-animation" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://github.com/viogami/blog/edit/main/docs/content/web/phpä½¿ç”¨grpcæœåŠ¡/index.md" rel="external" title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-print default-animation" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/hugo-theme-relearn/exampleSite/web/grpc-php/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-prev default-animation" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/hugo-theme-relearn/exampleSite/web/k8s-agones/index.html" title="è‡ªé¡¶å‘ä¸‹å­¦ä¹ K8S--éƒ¨ç½²Agones (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next default-animation" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/hugo-theme-relearn/exampleSite/web/grpc-go-python/index.html" title="ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more default-animation" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable web" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="/hugo-theme-relearn/exampleSite/tags/grpc/index.html">GRPC</a></li>
    <li><a class="term-link" href="/hugo-theme-relearn/exampleSite/tags/grpc-go/index.html">Grpc-Go</a></li>
    <li><a class="term-link" href="/hugo-theme-relearn/exampleSite/tags/grpc-php/index.html">Grpc-Php</a></li>
    <li><a class="term-link" href="/hugo-theme-relearn/exampleSite/tags/grpc-python/index.html">Grpc-Python</a></li>
    <li><a class="term-link" href="/hugo-theme-relearn/exampleSite/tags/php/index.html">Php</a></li>
  </ul>
</div>
  </header>

<h1 id="phpä½¿ç”¨grpcæœåŠ¡ä»0å¼€å§‹å¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š">phpä½¿ç”¨grpcæœåŠ¡(ä»0å¼€å§‹ï¼Œå¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š)</h1>

<p>grpcæ˜¯é¢å¯¹å¾®æœåŠ¡æ¡†æ¶è€Œé£ç”Ÿæ°´èµ·çš„ï¼Œä¸Šæ¬¡æˆ‘ç”¨pythonç¼–å†™äº†ä¸€ä¸ªå›¾ç¥ç»ç½‘ç»œå¤„ç†çš„å¾®æœåŠ¡ï¼Œä½¿ç”¨grpcæ”¾åœ¨æˆ‘çš„æœåŠ¡å™¨æœ¬åœ°ç«¯å£ä¸Šã€‚</p>
<p>ç°åœ¨æˆ‘å¸Œæœ›æˆ‘çš„ä¸€ä¸ªphpé¡¹ç›®ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥æœåŠ¡ï¼Œç°åœ¨æ¥è¯•ä¸€è¯•å§~</p>
<h2 id="æµç¨‹">æµç¨‹<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<ul>
<li>phpçš„æœåŠ¡å™¨å®‰è£…protoc</li>
<li>phpçš„æœåŠ¡å™¨å®‰è£…grpc</li>
<li><del>ç¼–å†™æœåŠ¡ç«¯ä»£ç </del></li>
<li>ç¼–å†™å®¢æˆ·ç«¯ä»£ç </li>
</ul>
<p>ç”±äºæœåŠ¡ç«¯(python)çš„ä»£ç å·²ç»ç¼–å†™æˆ–è€…è¯´å·²ç»éƒ¨ç½²ï¼Œå°±ä¸åšå™è¿°äº†ã€‚</p>
<p>å®‰è£…ä»£ç è¯·æ ¹æ®è‡ªå·±çš„phpç‰ˆæœ¬å’Œgrpcç‰ˆæœ¬é…Œæƒ…è‡ªå®šä¹‰ã€‚æœ¬äººä½¿ç”¨çš„php8.0ï¼Œgrpc1.62.0ï¼Œprotobuf4.62.0</p>
<h2 id="å®‰è£…protocè§£é‡Šå™¨">å®‰è£…protocè§£é‡Šå™¨<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>å’Œwindowså¼€å‘ä¸€æ ·ï¼Œä½¿ç”¨grpcæœåŠ¡å‡éœ€è¦ä½¿ç”¨protocè§£é‡Šå™¨ï¼Œå»å®˜æ–¹githubä¸‹çš„releaseä¸‹è½½linuxç‰ˆæœ¬ï¼š
<a href="https://github.com/protocolbuffers/protobuf/releases/download/v26.0/protoc-26.0-linux-x86_64.zip" rel="external">protoc-26.0-linux-x86_64.zip</a></p>
<p>è§£å‹åˆ° <code>/usr/bin/</code>ç›®å½•ä¸‹</p>
<blockquote>
<p>å¦‚æœä½ ä½¿ç”¨å®å¡”ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å…ˆåœ¨æœ¬åœ°ç”µè„‘ä¸Šè§£å‹ï¼ŒæŠŠè§£å‹åçš„binæ–‡ä»¶å¤¹é‡Œçš„protocæ–‡ä»¶ä¸Šä¼ åˆ° <code>/usr/bin/</code>ä¸­å°±å¥½äº†ã€‚</p>
</blockquote>
<p>ç»ˆç«¯ä¸­è¾“å…¥ <code>protoc</code>,æœ‰è¿”å›å³ä¸ºæˆåŠŸ</p>
<h2 id="å®‰è£…grpc">å®‰è£…grpc<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>æ— è®ºä½ æœåŠ¡å™¨æ˜¯å¦å®‰è£…peclï¼Œå¯ä»¥ç›´æ¥é€šè¿‡httpè¯·æ±‚å®‰è£…phpç›¸å…³åŒ…ï¼Œä½†æ˜¯å¿…é¡»å®‰è£…äº†php(åºŸè¯)</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ä¸‹è½½è§£å‹ grpc</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ~
</span></span><span class="line"><span class="cl">wget http://pecl.php.net/get/grpc-1.62.0.tgz
</span></span><span class="line"><span class="cl">tar xvf grpc-1.62.0.tgz
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> grpc-1.62.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç”Ÿæˆé…ç½®å¹¶ç¼–è¯‘å®‰è£…(ç¼–è¯‘å®‰è£…æ—¶é—´å¾ˆé•¿ï¼Œæˆ‘å¤§æ¦‚å®‰è£…äº†ä¸€å°æ—¶å·¦å³)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># æ³¨æ„é€‰æ‹©ä½ è‡ªå·±çš„è·¯å¾„ä»¥åŠphpç‰ˆæœ¬ï¼Œæˆ‘æ˜¯80</span>
</span></span><span class="line"><span class="cl">/www/server/php/80/bin/phpize
</span></span><span class="line"><span class="cl">./configure --with-php-config<span class="o">=</span>/www/server/php/80/bin/php-config
</span></span><span class="line"><span class="cl">make <span class="o">&amp;&amp;</span> make install</span></span></code></pre></div>
<p>ä¹‹åè¦é…ç½®phpçš„æ‹“å±•
<strong>æ³¨æ„ï¼Œè¿™æ˜¯å¿…è¦çš„ï¼Œcomposeå®‰è£…çš„grpcä¾èµ–ï¼Œåº•å±‚è¿˜æ˜¯è°ƒç”¨çš„è¿™ä¸ªgrpcæ‹“å±•ï¼</strong></p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># é…ç½®PHPæ‰©å±•</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> grpc-1.62.0
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;extension = grpc.so&#34;</span> &gt;&gt; /www/server/php/80/etc/php.ini
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> protobuf-4.62.0  <span class="c1"># å¦‚æœæ²¡æœ‰è·¯å¾„è¯·ä»¿ç…§grpcå®‰è£…çš„æ–¹å¼æ‰‹åŠ¨å®‰è£…å®‰è£…ä¸€ä¸‹ï¼Œæˆ‘ä¸ªäººè§‰å¾—å¯èƒ½å¹¶ä¸éœ€è¦</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;extension = protobuf.so&#34;</span> &gt;&gt; /www/server/php/80/etc/php.ini</span></span></code></pre></div>
<p>æœ€åé‡å¯ä¸€ä¸‹phpå’ŒnginxæœåŠ¡å°±å¤§åŠŸå‘Šæˆäº†</p>
<h2 id="ç¼–è¯‘protocæ–‡ä»¶">ç¼–è¯‘protocæ–‡ä»¶<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>å…·ä½“çš„protocæ–‡ä»¶çš„å®šä¹‰è¯¦ç»†è§æˆ‘<a href="http://viogami.me/index.php/archives/158/" rel="external">ä¹‹å‰çš„åšå®¢</a></p>
<p>éœ€è¦å®‰è£…protocå’Œgrpc_php_plugin</p>
<p>ä½¿ç”¨å¦‚ä¸‹ä»£ç ç”Ÿæˆï¼š</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">protoc --php_out ./ you-file.proto  <span class="c1">#éœ€è¦å®‰è£…protocè§£é‡Šå™¨ï¼Œç”Ÿæˆprotocçš„phpå®šä¹‰æ–‡ä»¶åœ¨å½“å‰ç›®å½•(./)</span>
</span></span><span class="line"><span class="cl">protoc --grpc_out ./ you-file.proto <span class="c1">#éœ€è¦grpc_php_pluginæ’ä»¶å®‰è£…ï¼Œç”Ÿæˆgrpcæ–‡ä»¶åœ¨å½“å‰ç›®å½•</span></span></span></code></pre></div>
<p>ç¬¬ä¸€è¡Œç”Ÿæˆä½ çš„protoæ•°æ®å®šä¹‰æ–‡ä»¶ï¼Œæˆ‘ç”Ÿæˆäº† <code>GCNResult.php</code>,<code>Node.php</code>,<code>Edge.php</code>,<code>GraphData.php</code>,
åŒæ—¶è¿˜ä¼šç”Ÿæˆä¸€ä¸ªGPBMetaDataæ–‡ä»¶å¤¹ã€‚
ç¬¬äºŒè¡Œç”Ÿæˆphpçš„grpcæ–‡ä»¶ï¼š<code>GCNServiceClient.php</code></p>
<p>æ³¨æ„ï¼Œå¦‚æœä½ æ²¡æœ‰ç”Ÿæˆgrpcæ–‡ä»¶çš„æ’ä»¶(å®‰è£…grpcå‡ºç°é—®é¢˜)ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½è¯¥æ’ä»¶
ç„¶åé€šè¿‡å¦‚ä¸‹ä»£ç ç”Ÿæˆ <code>xxxClient.php</code>æ–‡ä»¶</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">protoc --grpc_out ./ --plugin<span class="o">=</span>protoc-gen-grpc<span class="o">=</span>/your-path-to-plugin/grpc_php_plugin you-filename.proto
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">:: è‡ªç”¨
</span></span><span class="line"><span class="cl">:: protoc --grpc_out ./ --plugin<span class="o">=</span>protoc-gen-grpc<span class="o">=</span>/opt/share/grpc_php_plugin gcn.proto</span></span></code></pre></div>
<h2 id="ç¼–å†™phpè¯·æ±‚çš„ä»£ç å®¢æˆ·ç«¯ä»£ç ">ç¼–å†™phpè¯·æ±‚çš„ä»£ç (å®¢æˆ·ç«¯ä»£ç )<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<h3 id="ç¼–å†™æ–‡ä»¶å‰ç½®æ³¨æ„äº‹é¡¹">ç¼–å†™æ–‡ä»¶å‰ç½®æ³¨æ„äº‹é¡¹<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<ul>
<li><strong>æ³¨æ„ï¼šå¦‚æœä½ ä½¿ç”¨å®å¡”ï¼Œéœ€è¦æŠŠphpè®¾ç½®é‡Œçš„ç¦ç”¨å‡½æ•° <code>putenv</code>å’Œ <code>proc_open</code>ç»™åˆ é™¤ï¼Œä¸ç„¶composerå®‰è£…æ— æ³•è¿›è¡Œã€‚</strong></li>
<li>éœ€è¦ç¼–å†™composer.jsonæ–‡ä»¶ï¼Œå› ä¸ºä½¿ç”¨äº† <code>dirname(__FILE__).'/vendor/autoload.php'</code>è¯¥è‡ªåŠ¨å¯¼å…¥åŠŸèƒ½ã€‚jsonæ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š</li>
</ul>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;require&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;grpc/grpc&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;google/protobuf&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;autoload&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;psr-4&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;GPBMetadata\\&#34;</span><span class="p">:</span> <span class="s2">&#34;protoc/GPBMetadata/&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;protoc\\&#34;</span><span class="p">:</span> <span class="s2">&#34;protoc/&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>ç¼–å†™ååœ¨æœåŠ¡å™¨è¯¥æ–‡ä»¶ç›®å½•ä¸‹å¯åŠ¨ç»ˆç«¯è¾“å…¥ <code>composer install</code>å³å¯ï¼Œä¼šç”Ÿæˆvendoræ–‡ä»¶å¤¹</p>
<p>ç°åœ¨æˆ‘å°†ç¼–å†™ä¸€ä¸ªæœ€ç®€å•çš„phpæ–‡ä»¶æ¥è°ƒç”¨è¿™ä¸ªæœåŠ¡ã€‚</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">require</span> <span class="nx">dirname</span><span class="p">(</span><span class="no">__FILE__</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;/vendor/autoload.php&#39;</span><span class="p">;</span> <span class="c1">// å¼•å…¥ gRPC PHP æ‰©å±•çš„è‡ªåŠ¨åŠ è½½æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="k">require</span> <span class="s1">&#39;protoc/GraphData.php&#39;</span><span class="p">;</span> <span class="c1">// å¼•å…¥åŒ…å« protocæ–‡ä»¶å¤¹ä¸‹çš„grpcç”Ÿæˆæ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="k">require</span> <span class="s1">&#39;protoc/Node.php&#39;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">require</span> <span class="s1">&#39;protoc/Edge.php&#39;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">require</span> <span class="s1">&#39;protoc/GCNResult.php&#39;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">require</span> <span class="s1">&#39;protoc/GCNServiceClient.php&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è¿›è¡Œgrpcè¯·æ±‚ï¼Œè·å–gcnå¤„ç†åçš„æ•°æ®ï¼Œè¿”å›jsonå­—ç¬¦ä¸²
</span></span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">GCN_request</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GCNServiceClient</span><span class="p">(</span><span class="s1">&#39;localhost:9999&#39;</span><span class="p">,</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;credentials&#39;</span> <span class="o">=&gt;</span> <span class="nx">\Grpc\ChannelCredentials</span><span class="o">::</span><span class="na">createInsecure</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»ºä¸€ä¸ªå®ä¾‹çš„å›¾æ•°æ®
</span></span></span><span class="line"><span class="cl">    <span class="nv">$G_example</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphData</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$G_example</span><span class="o">-&gt;</span><span class="na">setNodes</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="k">new</span> <span class="nx">Node</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">setId</span><span class="p">(</span><span class="s2">&#34;node1&#34;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setFeatures</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="k">new</span> <span class="nx">Node</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">setId</span><span class="p">(</span><span class="s2">&#34;node2&#34;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setFeatures</span><span class="p">([</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$G_example</span><span class="o">-&gt;</span><span class="na">setEdges</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="k">new</span> <span class="nx">Edge</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">setSourceId</span><span class="p">(</span><span class="s2">&#34;node1&#34;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setTargetId</span><span class="p">(</span><span class="s2">&#34;node2&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="c1">// å‘é€è¯·æ±‚å¹¶æ¥æ”¶å“åº”
</span></span></span><span class="line"><span class="cl">    <span class="k">list</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="nv">$status</span><span class="p">)</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">ProcessGraph</span><span class="p">(</span><span class="nv">$G_example</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">wait</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nv">$status</span><span class="o">-&gt;</span><span class="na">code</span> <span class="o">!==</span> <span class="nx">Grpc\STATUS_OK</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// gRPC è¯·æ±‚å‡ºé”™
</span></span></span><span class="line"><span class="cl">    <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">&#39;Error calling grpc server -&gt; ProcessGraph: &#39;</span> <span class="o">.</span> <span class="nv">$status</span><span class="o">-&gt;</span><span class="na">details</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å› ä¸ºæˆ‘çš„è¿”å›ç»“æœæ˜¯ä¸ªmapæ•°æ®ç±»å‹ï¼Œphpä¸­æ²¡æœ‰è¯¥ç±»å‹ï¼Œéœ€è¦åšä¸€ä¸ªéå†å–å€¼ï¼Œå¦‚æœæ˜¯stringç±»å‹å¯ä»¥ç›´æ¥å–ã€‚
</span></span></span><span class="line"><span class="cl">    <span class="nv">$NodeScores</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getNodeScores</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$NodeScores</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">json_encode</span><span class="p">(</span><span class="nv">$NodeScores</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªjsonæ•°æ®ï¼Œæƒ³è¦ä¿®æ”¹å¯ä»¥ä½¿ç”¨ <code>json_decode()</code> , è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼</p>
<h2 id="å¤‡æ³¨">å¤‡æ³¨<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>å› ä¸ºæˆ‘çš„protocæ–‡ä»¶çš„è¿”å›ç»“æœå®šä¹‰ä¸ºä¸€ä¸ªmapï¼Œè¿™æ˜¯goæ‰æœ‰çš„æ•°æ®ç»“æ„ï¼Œphpæ²¡æœ‰
ä½¿ç”¨ <code>var_dump($response-&gt;getNodeScores())</code>å¯ä»¥çœ‹åˆ°è¿™æ˜¯è°·æ­Œgrpcæ ¸å¿ƒä¸­å®šä¹‰çš„ä¸€ä¸ªmapfield objectï¼Œå¯ä»¥ç›´æ¥åƒgoçš„mapä¸€æ ·ï¼Œç”¨ <code>$response-&gt;getNodeScores()['xxx']</code>è·å–å€¼ã€‚</p>
<p>è™½ç„¶å®˜ç½‘æ˜¾ç¤ºæœ‰ToString()çš„æ–¹æ³•ï¼š<a href="https://cloud.google.com/dotnet/docs/reference/Google.Protobuf/latest/Google.Protobuf.Collections.MapField-2#Google_Protobuf_Collections_MapField_2_ToString" rel="external">https://cloud.google.com/dotnet/docs/reference/Google.Protobuf/latest/Google.Protobuf.Collections.MapField-2#Google_Protobuf_Collections_MapField_2_ToString</a>
ä½†æ˜¯åœ¨è¿™é‡Œæ— æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘åªèƒ½é€šè¿‡éå†çš„æ–¹å¼è·å–æ‰€æœ‰å€¼å­˜åˆ°ä¸€ä¸ªæ•°ç»„é‡Œï¼Œæ¯•ç«Ÿmapç»“æ„æœ¬èº«å°±ä¸æ”¯æŒä¸€æ¬¡è·å–å…¨éƒ¨ï¼Œè¿˜æ˜¯è¦éå†ã€‚</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Mar 24, 2024
  </footer>
</article>
        </div>
      </main>
    </div>
    <script src="/hugo-theme-relearn/exampleSite/js/perfect-scrollbar/perfect-scrollbar.min.js?1769159049" defer></script>
    <script src="/hugo-theme-relearn/exampleSite/js/theme.min.js?1769159049" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
