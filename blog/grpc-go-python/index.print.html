<!DOCTYPE html>
<html id="R-html" lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.154.5">
    <meta name="generator" content="Relearn 9.0.3+8bb66fa674351f3a0b0917a7552caac686eca920">
    <meta name="description" content="gRPCæ˜¯Google å¼€å‘çš„é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ï¼ŒåŸºäº HTTP/2 åè®®è¿›è¡Œé€šä¿¡ï¼Œä½¿ç”¨ Protocol Buffersï¼ˆprotobufï¼‰ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼Œå¯ä»¥çœ‹ä¸ºä¸€ç§åè®®ã€‚grpcå¯ä»¥ç”¨äºå„ç§ä¸åŒæœåŠ¡é—´çš„é€šä¿¡ï¼Œå±è”½åº•å±‚ç»†èŠ‚(å¦‚ç¼–ç¨‹è¯­è¨€ï¼Œæ“ä½œç³»ç»Ÿç­‰)">
    <meta name="author" content="SÃ¶ren Weber">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://mcshelby.github.io/hugo-theme-relearn/images/hero.png">
    <meta name="twitter:title" content="ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡ :: Hugo Relearn Theme">
    <meta name="twitter:description" content="gRPCæ˜¯Google å¼€å‘çš„é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ï¼ŒåŸºäº HTTP/2 åè®®è¿›è¡Œé€šä¿¡ï¼Œä½¿ç”¨ Protocol Buffersï¼ˆprotobufï¼‰ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼Œå¯ä»¥çœ‹ä¸ºä¸€ç§åè®®ã€‚grpcå¯ä»¥ç”¨äºå„ç§ä¸åŒæœåŠ¡é—´çš„é€šä¿¡ï¼Œå±è”½åº•å±‚ç»†èŠ‚(å¦‚ç¼–ç¨‹è¯­è¨€ï¼Œæ“ä½œç³»ç»Ÿç­‰)">
    <meta property="og:url" content="https://mcshelby.github.io/hugo-theme-relearn/blog/grpc-go-python/index.html">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡ :: Hugo Relearn Theme">
    <meta property="og:description" content="gRPCæ˜¯Google å¼€å‘çš„é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ï¼ŒåŸºäº HTTP/2 åè®®è¿›è¡Œé€šä¿¡ï¼Œä½¿ç”¨ Protocol Buffersï¼ˆprotobufï¼‰ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼Œå¯ä»¥çœ‹ä¸ºä¸€ç§åè®®ã€‚grpcå¯ä»¥ç”¨äºå„ç§ä¸åŒæœåŠ¡é—´çš„é€šä¿¡ï¼Œå±è”½åº•å±‚ç»†èŠ‚(å¦‚ç¼–ç¨‹è¯­è¨€ï¼Œæ“ä½œç³»ç»Ÿç­‰)">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Blog">
    <meta property="article:published_time" content="2024-03-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-03-21T00:00:00+00:00">
    <meta property="article:tag" content="GRPC">
    <meta property="article:tag" content="Go">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Grpc-Go">
    <meta property="article:tag" content="Grpc-Python">
    <meta property="og:image" content="https://mcshelby.github.io/hugo-theme-relearn/images/hero.png">
    <meta itemprop="name" content="ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡ :: Hugo Relearn Theme">
    <meta itemprop="description" content="gRPCæ˜¯Google å¼€å‘çš„é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ï¼ŒåŸºäº HTTP/2 åè®®è¿›è¡Œé€šä¿¡ï¼Œä½¿ç”¨ Protocol Buffersï¼ˆprotobufï¼‰ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼Œå¯ä»¥çœ‹ä¸ºä¸€ç§åè®®ã€‚grpcå¯ä»¥ç”¨äºå„ç§ä¸åŒæœåŠ¡é—´çš„é€šä¿¡ï¼Œå±è”½åº•å±‚ç»†èŠ‚(å¦‚ç¼–ç¨‹è¯­è¨€ï¼Œæ“ä½œç³»ç»Ÿç­‰)">
    <meta itemprop="datePublished" content="2024-03-21T00:00:00+00:00">
    <meta itemprop="dateModified" content="2024-03-21T00:00:00+00:00">
    <meta itemprop="wordCount" content="410">
    <meta itemprop="image" content="https://mcshelby.github.io/hugo-theme-relearn/images/hero.png">
    <meta itemprop="keywords" content="GRPC,Go,Python,Grpc-Go,Grpc-Python">
    <title>ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡ :: Hugo Relearn Theme</title>
    <link href="https://mcshelby.github.io/hugo-theme-relearn/blog/grpc-go-python/index.html" rel="canonical" type="text/html" title="ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡ :: Hugo Relearn Theme">
    <link href="/hugo-theme-relearn/images/logo.svg?1769070402" rel="icon" type="image/svg+xml">
    <link href="/hugo-theme-relearn/css/auto-complete/auto-complete.min.css?1769070402" rel="stylesheet">
    <script src="/hugo-theme-relearn/js/auto-complete/auto-complete.min.js?1769070402" defer></script>
    <script src="/hugo-theme-relearn/js/search-lunr.min.js?1769070402" defer></script>
    <script src="/hugo-theme-relearn/js/search.min.js?1769070402" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/hugo-theme-relearn/searchindex.en.js?1769070402";
    </script>
    <script src="/hugo-theme-relearn/js/lunr/lunr.min.js?1769070402" defer></script>
    <script src="/hugo-theme-relearn/js/lunr/lunr.stemmer.support.min.js?1769070402" defer></script>
    <script src="/hugo-theme-relearn/js/lunr/lunr.multi.min.js?1769070402" defer></script>
    <script src="/hugo-theme-relearn/js/lunr/lunr.en.min.js?1769070402" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/hugo-theme-relearn/fonts/fontawesome/css/all.min.css?1769070402" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/hugo-theme-relearn/fonts/fontawesome/css/all.min.css?1769070402" rel="stylesheet"></noscript>
    <link href="/hugo-theme-relearn/css/perfect-scrollbar/perfect-scrollbar.min.css?1769070402" rel="stylesheet">
    <link href="/hugo-theme-relearn/css/theme.min.css?1769070402" rel="stylesheet">
    <link href="/hugo-theme-relearn/css/format-print.min.css?1769070402" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/blog\/grpc-go-python\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/mcshelby.github.io\/hugo-theme-relearn';
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'relearn-auto', 'relearn-dark', 'relearn-light', 'relearn-bright', 'zen-auto', 'zen-dark', 'zen-light', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red' ];
      window.relearn.customvariantprefix = "my-custom-";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.localStorage.getItem(window.relearn.absBaseUri + "/variant") ?? "";
        if( !variant ||
            (!variant.startsWith(window.relearn.customvariantprefix) && !window.relearn.themevariants.includes(variant)) ||
            (variant.startsWith(window.relearn.customvariantprefix) && !window.localStorage.getItem(window.relearn.absBaseUri + "/variantstylesheet-" + variant)) ){
          variant = window.relearn.themevariants[0];
          window.localStorage.setItem(window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <script src="/hugo-theme-relearn/js/variant.min.js?1769070402"></script>
    <style>
       
      #R-body img.bg-white {
        background-color: white;
      }
    </style>
  </head>
  <body class="mobile-support print" data-origin="/hugo-theme-relearn/blog/grpc-go-python/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar" class="default-animation">
        <div class="topbar-wrapper default-animation">
          <div class="topbar-sidebar-divider default-animation"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar default-animation" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc default-animation" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-table-list"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#grpcå‰è¨€">grpcå‰è¨€</a></li>
    <li><a href="#ä¸»è¦æµç¨‹">ä¸»è¦æµç¨‹</a></li>
    <li><a href="#å®‰è£…protocè§£é‡Šå™¨">å®‰è£…protocè§£é‡Šå™¨</a></li>
    <li><a href="#goç«¯å·¥ä½œ">goç«¯å·¥ä½œ</a></li>
    <li><a href="#pythonç«¯å·¥ä½œ">pythonç«¯å·¥ä½œ</a>
      <ul>
        <li><a href="#ç”Ÿæˆgrpcæ–‡ä»¶">ç”Ÿæˆgrpcæ–‡ä»¶</a></li>
      </ul>
    </li>
    <li><a href="#å¯åŠ¨">å¯åŠ¨</a></li>
  </ul>
</nav> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class="a11y-only"><a itemprop="item" href="/hugo-theme-relearn/index.html"><span itemprop="name">Hugo Relearn Theme</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/hugo-theme-relearn/blog/index.html"><span itemprop="name">Blog</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-edit default-animation" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://github.com/McShelby/hugo-theme-relearn/edit/main/docs/content/blog/ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡/index.md" rel="external" target="_self" title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-print default-animation" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/hugo-theme-relearn/blog/grpc-go-python/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-prev default-animation" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/hugo-theme-relearn/blog/grpc-php/index.html" title="phpä½¿ç”¨grpcæœåŠ¡(ä»0å¼€å§‹ï¼Œå¹¶ä¸”åŒ…å«mapfieldæ–‡ä»¶è§£é‡Š) (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next default-animation" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/hugo-theme-relearn/blog/prism-mac-style/index.html" title="Typechoä¸­ä»£ç é«˜äº®å¹¶æœ‰Macé£æ ¼ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more default-animation" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable blog" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="/hugo-theme-relearn/tags/go/index.html">Go</a></li>
    <li><a class="term-link" href="/hugo-theme-relearn/tags/grpc/index.html">GRPC</a></li>
    <li><a class="term-link" href="/hugo-theme-relearn/tags/grpc-go/index.html">Grpc-Go</a></li>
    <li><a class="term-link" href="/hugo-theme-relearn/tags/grpc-python/index.html">Grpc-Python</a></li>
    <li><a class="term-link" href="/hugo-theme-relearn/tags/python/index.html">Python</a></li>
  </ul>
</div>
  </header>

<h1 id="ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡">ä½¿ç”¨grpcåœ¨goåç«¯å’ŒpythonæœåŠ¡é—´é€šä¿¡</h1>

<h2 id="grpcå‰è¨€">grpcå‰è¨€<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>gRPCæ˜¯Google å¼€å‘çš„é«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ï¼Œ
åŸºäº HTTP/2 åè®®è¿›è¡Œé€šä¿¡ï¼Œä½¿ç”¨ Protocol Buffersï¼ˆprotobufï¼‰ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼Œå¯ä»¥çœ‹ä¸ºä¸€ç§åè®®ã€‚
<strong>grpcå¯ä»¥ç”¨äºå„ç§ä¸åŒæœåŠ¡é—´çš„é€šä¿¡ï¼Œå±è”½åº•å±‚ç»†èŠ‚(å¦‚ç¼–ç¨‹è¯­è¨€ï¼Œæ“ä½œç³»ç»Ÿç­‰)</strong></p>
<p>ç”±äºæˆ‘çš„ä¸€ä¸ªgoåç«¯(ä¹Ÿå¯ä»¥ä¸æ˜¯go)éœ€è¦å®ç°ç¥ç»ç½‘ç»œç›¸å…³çš„åŠŸèƒ½ï¼Œæˆ‘è¦è°ƒç”¨ä¸€ä¸ªpythonçš„æœåŠ¡ï¼Œäºæ˜¯æƒ³åˆ°äº†ä½¿ç”¨grpcçš„æ–¹å¼ã€‚</p>
<p>åˆæ¬¡æ¥è§¦ï¼Œå°†ä»0ä»‹ç»åˆ°åŠŸèƒ½å®ç°ã€‚</p>
<p>æ„Ÿè°¢å®˜æ–¹çš„æ–‡æ¡£</p>
<blockquote>
<p><a href="https://grpc.io/docs/languages/go/quickstart/" rel="external" target="_self">https://grpc.io/docs/languages/go/quickstart/</a></p>
</blockquote>
<h2 id="ä¸»è¦æµç¨‹">ä¸»è¦æµç¨‹<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<ul>
<li>å®šä¹‰.protoæ–‡ä»¶ï¼šåˆ›å»ºä¸€ä¸ª .proto æ–‡ä»¶ï¼Œå®šä¹‰å›¾æ•°æ®å’Œ GCN ç»“æœçš„æ¶ˆæ¯ç±»å‹ä»¥åŠæœåŠ¡æ¥å£ã€‚</li>
<li>ç”Ÿæˆ gRPC ä»£ç ï¼šä½¿ç”¨ Protocol Buffers ç¼–è¯‘å™¨ protocï¼Œæ ¹æ® .proto æ–‡ä»¶ç”Ÿæˆ Go å’Œ Python çš„ gRPC ä»£ç ã€‚</li>
<li>å®ç° Python æœåŠ¡å™¨ï¼šåœ¨ Python ä¸­å®ç° gRPC æœåŠ¡å™¨ï¼Œæ¥æ”¶æ¥è‡ª Go å®¢æˆ·ç«¯çš„å›¾æ•°æ®ï¼Œè¿›è¡Œ GCN å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†ç»“æœã€‚</li>
<li>å®ç° Go å®¢æˆ·ç«¯ï¼šåœ¨ Go ä¸­å®ç° gRPC å®¢æˆ·ç«¯ï¼Œå‘é€å›¾æ•°æ®åˆ° Python æœåŠ¡å™¨ï¼Œå¹¶æ¥æ”¶å¤„ç†ç»“æœã€‚</li>
</ul>
<h2 id="å®‰è£…protocè§£é‡Šå™¨">å®‰è£…protocè§£é‡Šå™¨<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>grpcæ˜¯é€šè¿‡pb(protocolbuffer)è¿™ä¸ªåè®®å·¥ä½œçš„ï¼Œé¦–å…ˆå®‰è£…protocçš„è§£é‡Šå™¨ï¼Œå¹¶å°†å…¶binæ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚
åœ°å€ï¼š<a href="https://github.com/protocolbuffers/protobuf/releases" rel="external" target="_self">https://github.com/protocolbuffers/protobuf/releases</a>
ä¸‹è½½åè§£å‹åˆ°ä»»æ„æ–‡ä»¶å¤¹ä½ç½®ï¼Œç„¶åå°†è§£å‹åçš„binæ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚</p>
<p>æ‰“å¼€cmdè¾“å…¥ <code>protoc</code>æœ‰æ•°æ®è¿”å›å°±okäº†ã€‚</p>
<p><strong>ä¸ºäº†åœ¨é¡¹ç›®ä¸­ä½¿ç”¨protocçš„ä¸€äº›æŒ‡ä»¤å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œè¿˜æœ‰æŠŠbinæ–‡ä»¶ä¸‹çš„ <code>protoc.exe</code>æ–‡ä»¶å¤åˆ¶ä¸€ä»½åˆ° <code>C:\Windows\System32</code>æ–‡ä»¶å¤¹ä¸‹ã€‚</strong></p>
<p>é¡ºä¾¿ä¸€æï¼Œä¸ºäº†protoæ–‡ä»¶å¯ä»¥åœ¨vscodeé«˜äº®æ˜¾ç¤ºï¼Œå¯ä»¥å®‰è£…å®˜æ–¹çš„æ’ä»¶ï¼šprotobufï¼Œä½œè€…ï¼špbkit</p>
<h2 id="goç«¯å·¥ä½œ">goç«¯å·¥ä½œ<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>é¦–å…ˆå®‰è£…goçš„grpcåº“</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">go</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="o">-</span><span class="nx">u</span><span class="w"> </span><span class="nx">google</span><span class="p">.</span><span class="nx">golang</span><span class="p">.</span><span class="nx">org</span><span class="o">/</span><span class="nx">grpc</span></span></span></code></pre></div>
<p>ç„¶åå®‰è£…å¯ä»¥å°†protoæ–‡ä»¶è‡ªåŠ¨è§£æä¸ºgoæ–‡ä»¶çš„è§£é‡Šå™¨ï¼š</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">go</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">google</span><span class="p">.</span><span class="nx">golang</span><span class="p">.</span><span class="nx">org</span><span class="o">/</span><span class="nx">protobuf</span><span class="o">/</span><span class="nx">cmd</span><span class="o">/</span><span class="nx">protoc</span><span class="o">-</span><span class="nx">gen</span><span class="o">-</span><span class="k">go</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">go</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">google</span><span class="p">.</span><span class="nx">golang</span><span class="p">.</span><span class="nx">org</span><span class="o">/</span><span class="nx">grpc</span><span class="o">/</span><span class="nx">cmd</span><span class="o">/</span><span class="nx">protoc</span><span class="o">-</span><span class="nx">gen</span><span class="o">-</span><span class="k">go</span><span class="o">-</span><span class="nx">grpc</span></span></span></code></pre></div>
<p>å®šä¹‰protoæ–‡ä»¶ <code>gcn.proto</code>ï¼š
å…¶ä¸­go_packageæ˜¯æŒ‡å®šç”Ÿæˆçš„æ–‡ä»¶ä½ç½®å’Œæ–‡ä»¶æ‰€åœ¨åŒ…åã€‚â€œ.â€ è¡¨ç¤ºæ–‡ä»¶ç”Ÿæˆåœ¨å½“å‰ç›®å½•ï¼Œâ€œï¼›â€è¡¨ç¤ºå‚æ•°åˆ†å‰²ï¼Œåé¢çš„protoæ˜¯å°†ç”Ÿæˆæ–‡ä»¶æ”¾åœ¨protoåŒ…ä¸­ã€‚
è¿˜æœ‰æ›´å¤šå¯é€‰å‚æ•°ï¼Œè‡ªè¡Œå‚è€ƒå®˜æ–¹</p>
<blockquote>
<p>go_packageï¼šæŒ‡å®šç”Ÿæˆ Go ä»£ç æ—¶çš„åŒ…è·¯å¾„ï¼Œæ ¼å¼ä¸º option go_package = &ldquo;package_path&rdquo;;ï¼Œç”¨äºå°†ç”Ÿæˆçš„ä»£ç æ”¾ç½®åœ¨æŒ‡å®šçš„ Go åŒ…ä¸­ã€‚</p>
<p>java_packageï¼šæŒ‡å®šç”Ÿæˆ Java ä»£ç æ—¶çš„åŒ…è·¯å¾„ï¼Œæ ¼å¼ä¸º option java_package = &ldquo;package_path&rdquo;;ï¼Œç”¨äºå°†ç”Ÿæˆçš„ä»£ç æ”¾ç½®åœ¨æŒ‡å®šçš„ Java åŒ…ä¸­ã€‚</p>
<p>java_outer_classnameï¼šæŒ‡å®šç”Ÿæˆ Java ä»£ç æ—¶çš„å¤–éƒ¨ç±»åï¼Œæ ¼å¼ä¸º option java_outer_classname = &ldquo;ClassName&rdquo;;ï¼Œç”¨äºæŒ‡å®šç”Ÿæˆçš„ Java ç±»çš„å¤–éƒ¨ç±»åã€‚</p>
<p>cc_generic_servicesï¼šæŒ‡å®šæ˜¯å¦ç”Ÿæˆ C++ é€šç”¨æœåŠ¡ï¼ˆgeneric servicesï¼‰ï¼Œæ ¼å¼ä¸º option
cc_generic_services = true; æˆ– option cc_generic_services = false;ï¼Œé»˜è®¤ä¸º
trueã€‚</p>
<p>cc_enable_arenasï¼šæŒ‡å®šæ˜¯å¦å¯ç”¨ C++ arenas å†…å­˜ç®¡ç†ï¼Œæ ¼å¼ä¸º option cc_enable_arenas =
true; æˆ– option cc_enable_arenas = false;ï¼Œé»˜è®¤ä¸º falseã€‚</p>
<p>optimize_forï¼šæŒ‡å®šä¼˜åŒ–é€‰é¡¹ï¼Œå¯ä»¥æ˜¯ SPEEDã€CODE_SIZE æˆ– LITE_RUNTIMEï¼Œæ ¼å¼ä¸º option
optimize_for = SPEED;ï¼Œé»˜è®¤ä¸º SPEEDã€‚</p>
<p>deprecatedï¼šæŒ‡å®šæ¶ˆæ¯æˆ–å­—æ®µå·²è¿‡æ—¶ï¼Œæ ¼å¼ä¸º option deprecated = true;ã€‚</p>
<p>rpc_timeoutï¼šæŒ‡å®š gRPC è°ƒç”¨çš„è¶…æ—¶æ—¶é—´ï¼Œæ ¼å¼ä¸º option rpc_timeout = &ldquo;10s&rdquo;;ï¼Œè¡¨ç¤ºè¶…æ—¶æ—¶é—´ä¸º 10
ç§’ã€‚</p>
</blockquote>
<p>gcn.protoåè®®æ–‡ä»¶å…·ä½“å®šä¹‰ä¸ºï¼š</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">syntax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#34;proto3&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">option</span><span class="w"> </span><span class="nx">go_package</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#34;.;proto&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">message</span><span class="w"> </span><span class="nx">Node</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">repeated</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nx">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">message</span><span class="w"> </span><span class="nx">Edge</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="nx">source_id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="nx">target_id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">message</span><span class="w"> </span><span class="nx">GraphData</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">repeated</span><span class="w"> </span><span class="nx">Node</span><span class="w"> </span><span class="nx">nodes</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">repeated</span><span class="w"> </span><span class="nx">Edge</span><span class="w"> </span><span class="nx">edges</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">message</span><span class="w"> </span><span class="nx">GCNResult</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">&gt;</span><span class="w"> </span><span class="nx">node_scores</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">service</span><span class="w"> </span><span class="nx">GCNService</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">rpc</span><span class="w"> </span><span class="nf">ProcessGraph</span><span class="p">(</span><span class="nx">GraphData</span><span class="p">)</span><span class="w"> </span><span class="nf">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">GCNResult</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>æˆ‘è¿™é‡Œæ˜¯ç”¨æ¥å¤„ç†å›¾æ•°æ®ã€‚</p>
<p>æ¥ä¸‹æ¥ç”Ÿæˆ gRPC ä»£ç ï¼š</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">protoc</span><span class="w"> </span><span class="o">--</span><span class="nx">go_out</span><span class="p">=.</span><span class="w"> </span><span class="o">--</span><span class="nx">go_opt</span><span class="p">=</span><span class="nx">paths</span><span class="p">=</span><span class="nx">source_relative</span><span class="w"> </span><span class="nx">your_proto_file</span><span class="p">.</span><span class="nx">proto</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">protoc</span><span class="w"> </span><span class="o">--</span><span class="k">go</span><span class="o">-</span><span class="nx">grpc_out</span><span class="p">=.</span><span class="w"> </span><span class="o">--</span><span class="k">go</span><span class="o">-</span><span class="nx">grpc_opt</span><span class="p">=</span><span class="nx">paths</span><span class="p">=</span><span class="nx">source_relative</span><span class="w"> </span><span class="nx">your_proto_file</span><span class="p">.</span><span class="nx">proto</span></span></span></code></pre></div>
<p>ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ <code>gcn.pb.go</code>å’Œ <code>gcn_grpc.pb.go</code></p>
<ul>
<li>å‰è€…ç”Ÿæˆçš„æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰pbåè®®çš„goä»£ç ï¼Œå°†æ•°æ®æ ¼å¼å†™ä¸ºgoçš„ç»“æ„ä½“å½¢å¼ã€‚åŒ…å«å¡«å……ã€åºåˆ—åŒ–ï¼Œæ£€ç´¢è¯·æ±‚å’Œå“åº”æ¶ˆæ¯ç±»å‹ã€‚</li>
<li>åè€…åŒ…å«<strong>å®¢æˆ·ç«¯</strong>ä½¿ç”¨ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œè°ƒç”¨çš„æ¥å£ç±»å‹ã€‚ä»¥åŠ<strong>æœåŠ¡ç«¯</strong>è¦å®ç°çš„æ¥å£ç±»å‹ã€‚åŒ…å«åˆ›å»ºå®¢æˆ·ç«¯æœåŠ¡å’ŒæœåŠ¡ç«¯æœåŠ¡çš„æ–¹æ³•ã€‚
<strong>è¯·æ³¨æ„ï¼Œæ— è®ºgoåç«¯ä½œä¸ºè¯·æ±‚grpcçš„ä¸€æ–¹(client)è¿˜æ˜¯åšå‡ºå“åº”çš„ä¸€æ–¹(server),è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯å¿…é¡»ç”Ÿæˆçš„ã€‚</strong>
ä½¿ç”¨ <code>client := pb.NewXXXXServiceClient(conn)</code>çš„æ–¹å¼åˆ›å»ºå®¢æˆ·ç«¯</li>
</ul>
<p>æœ€åå°±æ˜¯å®Œæˆgoç«¯çš„grpcè¯·æ±‚ä»£ç ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºä¸€ä¸ªgrpcçš„è¿æ¥ï¼Œè¯·æ±‚å®Œæ¯•deferæ–­å¼€ï¼š</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">GCN_request</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">float32</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nx">conn</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;localhost:9999&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">grpc</span><span class="p">.</span><span class="nf">WithTransportCredentials</span><span class="p">(</span><span class="nx">insecure</span><span class="p">.</span><span class="nf">NewCredentials</span><span class="p">()))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Failed to connect to gcnserver(py) by grpc</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="k">defer</span><span class="w"> </span><span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pb</span><span class="p">.</span><span class="nf">NewGCNServiceClient</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="c1">// åˆ›å»ºä¸€ä¸ªå®ä¾‹çš„å›¾æ•°æ®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nx">G_example</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">pb</span><span class="p">.</span><span class="nx">GraphData</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">Nodes</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">pb</span><span class="p">.</span><span class="nx">Node</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">{</span><span class="nx">Id</span><span class="p">:</span><span class="w"> </span><span class="s">&#34;node1&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">Features</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="kt">float32</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">}},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">{</span><span class="nx">Id</span><span class="p">:</span><span class="w"> </span><span class="s">&#34;node2&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">Features</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="kt">float32</span><span class="p">{</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">}},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">Edges</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">pb</span><span class="p">.</span><span class="nx">Edge</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">{</span><span class="nx">SourceId</span><span class="p">:</span><span class="w"> </span><span class="s">&#34;node1&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">TargetId</span><span class="p">:</span><span class="w"> </span><span class="s">&#34;node2&#34;</span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="c1">// å‘é€è¯·æ±‚å¹¶æ¥æ”¶å“åº”</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nf">ProcessGraph</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span><span class="w"> </span><span class="nx">G_example</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Error calling ProcessGraph</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">NodeScores</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>æœ€åçš„æœ€ååˆ«å¿˜äº†åˆ›å»ºä¸€ä¸ªè·¯ç”±è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<h2 id="pythonç«¯å·¥ä½œ">pythonç«¯å·¥ä½œ<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>pyåŒæ ·å®‰è£…grpcç›¸å…³åº“</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">grpcio</span>
</span></span><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">grpcio</span><span class="o">-</span><span class="n">tools</span></span></span></code></pre></div>
<h3 id="ç”Ÿæˆgrpcæ–‡ä»¶">ç”Ÿæˆgrpcæ–‡ä»¶<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>ç»ˆç«¯cdåˆ°protoæ–‡ä»¶ç›®å½•ä¸‹ï¼Œæ‰§è¡Œï¼š</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">grpc_tools</span><span class="o">.</span><span class="n">protoc</span> <span class="o">-</span><span class="n">I</span> <span class="o">./</span> <span class="o">--</span><span class="n">python_out</span><span class="o">=./</span> <span class="o">--</span><span class="n">grpc_python_out</span><span class="o">=.</span> <span class="n">your</span><span class="o">-</span><span class="n">file</span><span class="o">.</span><span class="n">proto</span></span></span></code></pre></div>
<p>pyçš„æœåŠ¡ç«¯ä»£ç grpcç›¸å…³çš„ä»£ç è¾ƒä¸ºç®€æ´ï¼Œé‡ç‚¹åœ¨äºæ•°æ®å¤„ç†ã€‚å°†å…¶æœåŠ¡ç«¯å£å’Œgrpcå®¢æˆ·ç«¯çš„è¯·æ±‚ç«¯å£ä¿æŒä¸€è‡´ã€‚
éƒ¨åˆ†ä»£ç å–è‡ªå®˜æ–¹ç¤ºä¾‹ã€‚</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">grpc</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">concurrent</span> <span class="kn">import</span> <span class="n">futures</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">proto</span> <span class="kn">import</span> <span class="n">gcn_pb2_grpc</span><span class="p">,</span> <span class="n">gcn_pb2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">GCNServicer</span><span class="p">(</span><span class="n">gcn_pb2_grpc</span><span class="o">.</span><span class="n">GCNServiceServicer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">ProcessGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Process graph data using GCN and return result</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># example: return gcn_pb2.GCNResult(node_scores={&#34;node1&#34;: 0.5, &#34;node2&#34;: 0.8})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">server</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span> <span class="o">=</span> <span class="n">grpc</span><span class="o">.</span><span class="n">server</span><span class="p">(</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">gcn_pb2_grpc</span><span class="o">.</span><span class="n">add_GCNServiceServicer_to_server</span><span class="p">(</span><span class="n">GCNServicer</span><span class="p">(),</span> <span class="n">server</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span><span class="o">.</span><span class="n">add_insecure_port</span><span class="p">(</span><span class="s1">&#39;[::]:9999&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;gRPC æœåŠ¡ç«¯å·²å¼€å¯,ç«¯å£ä¸º9999...&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span><span class="o">.</span><span class="n">wait_for_termination</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span><span class="p">()</span></span></span></code></pre></div>
<h2 id="å¯åŠ¨">å¯åŠ¨<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>åšå¥½äº†ä»¥ä¸Šå·¥ä½œå°±å¤§åŠŸå‘Šæˆäº†ï¼Œå¯åŠ¨ä¸¤ä¸ªæœåŠ¡å³å¯</p>
<p><code>go run main.go</code></p>
<p><code>python server.py</code></p>
<p>ç„¶åè®¿é—®å®šä¹‰çš„è·¯ç”±åœ°å€ï¼Œå¦‚ä¸‹æ˜¾ç¤ºï¼Œnice~</p>
<p><a href="#R-image-706a5cf788c3a15142bfc0de6bf60eef" class="lightbox-link"><img alt="2" class="bg-white border lazy lightbox figure-image" loading="lazy" src="/hugo-theme-relearn/blog/grpc-go-python/1.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-706a5cf788c3a15142bfc0de6bf60eef"><img alt="2" class="bg-white border lazy lightbox lightbox-image" loading="lazy" src="/hugo-theme-relearn/blog/grpc-go-python/1.png"></a></p>
<script src="https://giscus.app/client.js"
        data-repo="viogami/blog"
        data-repo-id="R_kgDOORWDyA"
        data-category="Announcements"
        data-category-id="DIC_kwDOORWDyM4Conxc"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Mar 21, 2024
  </footer>
</article>
        </div>
      </main>
    </div>
    <script src="/hugo-theme-relearn/js/perfect-scrollbar/perfect-scrollbar.min.js?1769070402" defer></script>
    <script src="/hugo-theme-relearn/js/theme.min.js?1769070402" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
